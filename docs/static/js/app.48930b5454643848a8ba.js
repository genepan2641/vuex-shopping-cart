webpackJsonp([1],{"+dRp":function(t,e){},"5Euj":function(t,e){},C1xP:function(t,e){},FcE6:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("Dd8w"),r=a.n(i),n=a("NYxO"),c={props:{index:{type:Number}},data:function(){return{showDeleteConfirm:!1}},computed:r()({},Object(n.c)(["cart"]),{cartItem:function(){return this.cart.cartList[this.index]}}),methods:{deleteCart:function(t,e){this.$store.dispatch("cart/deleteCart",{hash:t,size:e})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-item"},[a("div",{staticClass:"cart-item__img-wrapper"},[a("div",{staticClass:"cart-item__img-inner"},[a("img",{staticClass:"cart-item__img",attrs:{src:"/static/images/"+t.cartItem.image,alt:""}})])]),t._v(" "),a("div",{staticClass:"cart-item__right"},[a("h5",{staticClass:"cart-item__title"},[t._v(t._s(t.cartItem.name))]),t._v(" "),a("p",{staticClass:"cart-item__desc"},[t._v(t._s(t.cartItem.size)+" x "+t._s(t.cartItem.amount))]),t._v(" "),a("p",{staticClass:"cart-item__desc"},[t._v("NT$ "+t._s(t.cartItem.price))]),t._v(" "),a("button",{staticClass:"cart-item__delete-btn btn-primary btn-small",on:{click:function(){return t.showDeleteConfirm=!0}}},[a("i",{staticClass:"fas fa-times"})]),t._v(" "),t.showDeleteConfirm?a("div",{staticClass:"delete-pop-out p10"},[a("p",{staticClass:"m0 mB10"},[t._v("Are you sure to delete this item?")]),t._v(" "),a("button",{staticClass:"btn-secondary",on:{click:function(e){t.deleteCart(t.cartItem.hash,t.cartItem.size)}}},[t._v("delete")]),t._v(" "),a("button",{staticClass:"btn-primary",on:{click:function(){return t.showDeleteConfirm=!1}}},[t._v("cancel")])]):t._e()])])},staticRenderFns:[]};var u={components:{CartPopOutItem:a("VU/8")(c,o,!1,function(t){a("XLKb")},"data-v-1bd10c12",null).exports},computed:r()({},Object(n.c)(["cart"])),methods:{handleClickViewCart:function(){this.$emit("click-view-cart"),this.$router.replace({name:"shoppingCart"})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-pop-out"},[t.cart.totalPrice>0?[a("div",{staticClass:"cart-pop-out__items-wrapper"},[t._l(t.cart.cartList,function(t,e){return a("cart-pop-out-item",{key:""+t.hash+t.size,attrs:{index:e}})}),t._v(" "),a("p",[t._v("\n\t\t\t\ttotal:\n\t\t\t\t"),a("span",{staticClass:"boldest"},[t._v("NT$"+t._s(t.cart.totalPrice))])])],2),t._v(" "),a("div",{staticClass:"cart-pop-out__btns-wrapper"},[a("button",{staticClass:"btn-primary cart-pop-out__btn",on:{click:t.handleClickViewCart}},[t._v("View Cart")]),t._v(" "),a("button",{staticClass:"btn-secondary cart-pop-out__btn"},[t._v("Checkout")])])]:[a("h5",{staticClass:"text-center"},[t._v("your cart is empty now")])]],2)},staticRenderFns:[]};var p={components:{CartPopOut:a("VU/8")(u,l,!1,function(t){a("+dRp")},"data-v-3c5d35ea",null).exports},computed:r()({},Object(n.b)({totalItems:"cart/totalItems"})),data:function(){return{showCart:!1}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-nav"},[a("div",{staticClass:"app-nav-container"},[a("router-link",{staticClass:"app-nav__link",attrs:{to:{name:"productList"}}},[t._v("Product List")]),t._v(" "),a("div",{staticClass:"app-nav__logo-wrapper"},[a("router-link",{staticClass:"app-nav__logo",attrs:{to:{name:"productList"}}},[t._v("ASAP")])],1),t._v(" "),a("a",{staticClass:"app-nav__link cart-pop-out__trigger",on:{click:function(e){return e.preventDefault(),t.showCart=!t.showCart}}},[a("span",{staticClass:"link-badge",class:{"link-badge--active":t.totalItems>0}},[t._v(t._s(t.totalItems))]),t._v("\n\t\t\tMy Cart\n\t\t")]),t._v(" "),t.showCart?a("div",{staticClass:"app-nav__cart-pop-mask",on:{click:function(e){return e.preventDefault(),t.showCart=!t.showCart}}}):t._e(),t._v(" "),t.showCart?a("div",{staticClass:"app-nav__cart-pop-wrapper"},[a("cart-pop-out",{on:{"click-view-cart":function(){return t.showCart=!t.showCart}}})],1):t._e()],1)])},staticRenderFns:[]};var m={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-footer"},[e("p",{staticClass:"app-footer__desc"},[this._v("genepan / vuex shopping cart")]),this._v(" "),e("p",{staticClass:"app-footer__desc"},[this._v("@2018 Gene Pan for practice")]),this._v(" "),e("p",{staticClass:"app-footer__desc app-footer__desc--highlight"},[this._v("pictures credits to ASOS.com")])])}]};var _={components:{AppNav:a("VU/8")(p,d,!1,function(t){a("X5Q8")},null,null).exports,AppFooter:a("VU/8")({},m,!1,function(t){a("vY6b")},"data-v-616164b2",null).exports},name:"App"},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-nav"),this._v(" "),e("div",{staticClass:"app-body"},[e("div",{staticClass:"page-container"},[e("router-view")],1)]),this._v(" "),e("app-footer")],1)},staticRenderFns:[]};var h=a("VU/8")(_,v,!1,function(t){a("5Euj")},null,null).exports,f=a("/ocq"),C={props:{name:{type:String},price:{type:Number},image:{type:String}},filters:{trimString:function(t){return t.length>35?t.slice(0,35)+"...":t}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-item"},[a("div",{staticClass:"product-item__header"},[a("div",{staticClass:"item-image"},[a("div",{staticClass:"item-image__inner"},[a("img",{staticClass:"item-image__img",attrs:{src:"static/images/"+t.image,alt:""}})])])]),t._v(" "),a("div",{staticClass:"product-item__body"},[a("div",{staticClass:"product-item__name"},[t._v(t._s(t._f("trimString")(t.name)))]),t._v(" "),a("p",{staticClass:"product-item__price"},[t._v("NT$ "+t._s(t.price))])])])},staticRenderFns:[]};var b={components:{ProductItem:a("VU/8")(C,g,!1,function(t){a("FcE6")},null,null).exports},data:function(){return{}},computed:r()({},Object(n.c)(["product"]))},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product-list-page"},[e("div",{staticClass:"product-items-wrapper"},this._l(this.product.productList,function(t){return e("router-link",{key:t.hash,staticClass:"link-wrapper",attrs:{to:{name:"productItem",params:{hash:t.hash}}}},[e("product-item",{attrs:{name:t.name,price:t.price,image:t.image}})],1)}))])},staticRenderFns:[]};var w=a("VU/8")(b,A,!1,function(t){a("C1xP")},null,null).exports,z={data:function(){return{isLoadingDetail:!1,productDetail:{},selectedSize:"",selectedAmount:1}},created:function(){this.fetchProductDetail()},computed:r()({},Object(n.c)(["cart"]),{sizeAmountInCart:function(){var t=this,e=this.cart.cartList.find(function(e){return e.hash==t.$route.params.hash&&e.size==t.selectedSize});return e?e.amount:0},availableAmount:function(){return this.productDetail.sizes[this.selectedSize]-this.sizeAmountInCart},allowCheckout:function(){return""!=this.selectedSize&&this.selectedAmount>0&&this.selectedAmount<=this.availableAmount}}),watch:{selectedSize:function(t){this.selectedAmount=1}},methods:{fetchProductDetail:function(){var t=this;this.isLoadingDetail=!0,this.$store.dispatch("product/fetchProductDetail",this.$route.params.hash).then(function(e){t.isLoadingDetail=!1,t.productDetail=e})},substractAmount:function(){this.selectedAmount>=2&&this.selectedAmount--},addAmount:function(){this.selectedAmount<this.availableAmount&&this.selectedAmount++},addToCart:function(){this.$store.dispatch("cart/addToCart",{hash:this.$route.params.hash,size:this.selectedSize,amount:this.selectedAmount}),this.selectedAmount=1}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-item-page"},[t.isLoadingDetail?[a("p",[t._v("is loading product...")])]:[a("div",{staticClass:"item-page-container"},[a("div",{staticClass:"item-page__left"},[a("div",{staticClass:"item-img__frame"},[a("div",{staticClass:"item-img__inner"},[a("img",{attrs:{src:"static/images/"+t.productDetail.image,alt:""}})])])]),t._v(" "),a("div",{staticClass:"item-page__right"},[a("div",{staticClass:"item-info"},[a("p",{staticClass:"item-info__name"},[t._v(t._s(t.productDetail.name))]),t._v(" "),a("p",[a("span",{staticClass:"item-info__price"},[t._v("NT$"+t._s(t.productDetail.price))])]),t._v(" "),a("div",{staticClass:"mB20"},[a("span",[t._v("choose size")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSize,expression:"selectedSize"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedSize=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("choose your size")]),t._v(" "),t._l(t.productDetail.sizes,function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})],2)]),t._v(" "),a("div",{staticClass:"mB20"},[a("button",{staticClass:"btn-primary",on:{click:function(e){t.substractAmount()}}},[t._v("-")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAmount,expression:"selectedAmount"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.selectedAmount},on:{input:function(e){e.target.composing||(t.selectedAmount=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn-primary",on:{click:function(e){t.addAmount()}}},[t._v("+")])]),t._v(" "),t.selectedSize?a("p",[t.availableAmount?[t._v("size: "+t._s(t.selectedSize)+" "+t._s(t.availableAmount)+" left")]:[t._v("size: "+t._s(t.selectedSize)+" is not available now")]],2):t._e(),t._v(" "),a("div",{staticClass:"mB20"},[a("button",{staticClass:"btn-secondary",attrs:{disabled:!t.allowCheckout},on:{click:t.addToCart}},[t._v("ADD TO CART")]),t._v(" "),a("router-link",{staticClass:"btn-primary",attrs:{to:{name:"shoppingCart"}}},[t._v("View Cart")])],1)])])])]],2)},staticRenderFns:[]};var y=a("VU/8")(z,k,!1,function(t){a("vgc1")},"data-v-2c3d4d16",null).exports,L={props:{index:{type:Number}},data:function(){return{showDeleteConfirm:!1}},computed:r()({},Object(n.c)(["cart"]),{cartItem:function(){return this.cart.cartList[this.index]}}),methods:{deleteCart:function(t,e){this.$store.dispatch("cart/deleteCart",{hash:t,size:e})}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-item"},[a("router-link",{staticClass:"cart-item__img-wrapper",attrs:{to:{name:"productItem",params:{hash:t.cartItem.hash}}}},[a("div",{staticClass:"cart-item__img-inner"},[a("img",{staticClass:"cart-item__img",attrs:{src:"/static/images/"+t.cartItem.image,alt:""}})])]),t._v(" "),a("div",{staticClass:"cart-item__right"},[a("h5",{staticClass:"cart-item__title"},[t._v(t._s(t.cartItem.name))]),t._v(" "),a("p",{staticClass:"cart-item__desc"},[t._v(t._s(t.cartItem.size)+" x "+t._s(t.cartItem.amount))]),t._v(" "),a("p",{staticClass:"cart-item__desc"},[t._v("NT$ "+t._s(t.cartItem.price))])]),t._v(" "),t.showDeleteConfirm?a("div",[a("p",[t._v("Are you sure to delete this item?")]),t._v(" "),a("button",{staticClass:"btn-secondary",on:{click:function(e){t.deleteCart(t.cartItem.hash,t.cartItem.size)}}},[t._v("yes")]),t._v(" "),a("button",{staticClass:"btn-primary",on:{click:function(){return t.showDeleteConfirm=!1}}},[t._v("cancel")])]):a("div",[a("button",{staticClass:"btn-primary",on:{click:function(){return t.showDeleteConfirm=!0}}},[a("i",{staticClass:"fas fa-trash-alt"})])])],1)},staticRenderFns:[]};var I={components:{CartItem:a("VU/8")(L,D,!1,function(t){a("VOWR")},"data-v-6ffc6b75",null).exports},computed:r()({},Object(n.c)(["cart"])),methods:{}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shopping-cart-page"},[t.cart.cartList.length>0?[a("div",{staticClass:"cart-page-container"},[a("div",{staticClass:"cart-page__left-wrapper"},[a("div",{staticClass:"cart-items-container"},t._l(t.cart.cartList,function(t,e){return a("cart-item",{key:""+t.hash+t.size,attrs:{index:e}})}))]),t._v(" "),a("div",{staticClass:"cart-page__right-wrapper"},[a("div",{staticClass:"cart-page__right"},[a("p",[t._v("\n\t\t\t\t\t\t\ttotal price:\n\t\t\t\t\t\t\t"),a("span",{staticClass:"boldest"},[t._v("NT$"+t._s(t.cart.totalPrice))])]),t._v(" "),a("button",{staticClass:"btn-secondary"},[t._v("CHECKOUT")])])])])]:[a("div",{staticClass:"text-center"},[a("p",{staticClass:"text-center"},[t._v("Nothing found in your cart here.")]),t._v(" "),a("router-link",{staticClass:"btn-secondary",attrs:{to:{name:"productList"}}},[t._v("Find Your Loved Ones!")])],1)]],2)},staticRenderFns:[]};var P=a("VU/8")(I,x,!1,function(t){a("T4tE")},"data-v-7a76870f",null).exports;s.a.use(f.a);var E=new f.a({routes:[{path:"/list",name:"productList",component:w},{path:"/item/:hash",name:"productItem",component:y},{path:"/cart",name:"shoppingCart",component:P},{path:"*",redirect:"/list"}]}),T=a("//Fk"),R=a.n(T);function S(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var $,O={namespaced:!0,state:{productList:[{hash:S(),name:"The North Face 1996 Retro Nuptse Vest in Black",sizes:{S:9,M:7,L:14},price:8200,image:"product_c.jpeg"},{hash:S(),name:"Puffer coat in purple",sizes:{S:10,M:10,L:10},price:2400,image:"product_a.jpeg"},{hash:S(),name:"Puffer coat in green",sizes:{S:10,M:5,L:10},price:3500,image:"product_b.jpeg"},{hash:S(),name:"Puffer coat in black with hood",sizes:{S:5,M:4,L:8},price:2780,image:"product_d.jpeg"}]},actions:{fetchProductDetail:function(t,e){var a=t.state;return new R.a(function(t,s){setTimeout(function(){t(a.productList.filter(function(t){return t.hash===e})[0])},100)})}}},V=a("bOdI"),N=a.n(V),F={namespaced:!0,state:{cartList:[],totalPrice:0},getters:{totalItems:function(t){return t.cartList.reduce(function(t,e){return t+e.amount},0)}},mutations:($={},N()($,"UPDATE_PRICE",function(t,e){t.totalPrice=e}),N()($,"ADD_CART",function(t,e){t.cartList.push(e)}),N()($,"UPDATE_CART",function(t,e){s.a.set(t.cartList[e.index],"amount",e.newAmount)}),N()($,"REMOVE_CART",function(t,e){s.a.delete(t.cartList,e.index)}),$),actions:{addToCart:function(t,e){var a=t.state,s=t.rootState,i=t.commit,r=t.dispatch;if(a.cartList.some(function(t){return t.hash==e.hash&&t.size==e.size})){var n=a.cartList.find(function(t){return t.hash==e.hash&&t.size==e.size});i("UPDATE_CART",{index:a.cartList.findIndex(function(t){return t==n}),newAmount:n.amount+e.amount})}else{var c=s.product.productList.find(function(t){return t.hash==e.hash});i("ADD_CART",{name:c.name,image:c.image,price:c.price,hash:e.hash,size:e.size,amount:e.amount})}r("calculatePrice")},calculatePrice:function(t){var e=t.state,a=t.commit,s=t.rootState.product.productList;a("UPDATE_PRICE",e.cartList.reduce(function(t,e){return t+(a=e.hash,s.find(function(t){return t.hash==a}).price*e.amount);var a},0))},deleteCart:function(t,e){var a=t.state,s=t.commit,i=t.dispatch,r=e.hash,n=e.size;s("REMOVE_CART",{index:a.cartList.findIndex(function(t){return t.hash==r&&t.size==n})}),i("calculatePrice")}}};s.a.use(n.a);var U=new n.a.Store({modules:{product:O,cart:F}});s.a.config.productionTip=!1,new s.a({el:"#app",store:U,router:E,components:{App:h},template:"<App/>"})},T4tE:function(t,e){},VOWR:function(t,e){},X5Q8:function(t,e){},XLKb:function(t,e){},vY6b:function(t,e){},vgc1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.48930b5454643848a8ba.js.map